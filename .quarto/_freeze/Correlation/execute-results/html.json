{
  "hash": "7a2794a4ffeb2911870b197bd0a53ee2",
  "result": {
    "engine": "knitr",
    "markdown": "## (2) Correlation - R\n\nAgain, this practical is also in R. This is an example of the great amount of resources available in open-source programming languages (will also be able to find similar things in Python), where new packages are developed and made available constantly. As key insight, explore, probably what you need is already out there for you to use!\n\n------------------------------------------------------------------------\n\nFor you to see the breadth of possibilities out there, here is an example of different ways in which to describe and learn about the correlation matrix of your dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install required libraries (if not already installed)\n\n#install.packages(c(\"ggplot2\", \"corrplot\", \"ggcorrplot\", \n#\"PerformanceAnalytics\", \"GGally\", \"psych\", \"corrr\"))\n\n# Load necessary libraries\nlibrary(ggplot2)\nlibrary(corrplot)\nlibrary(ggcorrplot)\nlibrary(PerformanceAnalytics)\nlibrary(GGally)\nlibrary(psych)\nlibrary(corrr)\n```\n:::\n\n\nTo assess the association between two variables, you can produce a scatter plot like below:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(123)\nx <- rnorm(100)\ny <- x + rnorm(100, sd = 0.5)\n\nggplot(data = data.frame(x, y), aes(x = x, y = y)) +\n  geom_point(color = \"blue\", size = 2) +\n  geom_smooth(method = \"lm\", color = \"red\", se = FALSE) +\n  labs(title = \"Correlation Plot with ggplot2\",\n       x = \"X values\", y = \"Y values\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Correlation_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nNow we are going to produce the correlation matrix, where in a go, you get insight of all the association happening in your dataset.For this we are going to use the mtcars data (A built-in dataset that contains measurements on 11 different attributes for 32 different cars). More specifically, the chosen variables are:\n\n-   mpg (Miles per Gallon): Represents the fuel efficiency of the car. Higher values, better efficiency.\n\n-   disp (Displacement): Represents the engine displacement, which is the total volume of all the cylinders in the engine.\n\n-   hp (Horsepower): Represents the power output of the car's engine.\n\n-   wt (Weight): Represents the weight of the car.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- mtcars[, c(\"mpg\", \"disp\", \"hp\", \"wt\")]\n```\n:::\n\n\nCan you calculate the correlation between them? Try out at least a pair.Remember there are different ways in which to calculate correlation <https://www.sthda.com/english/wiki/correlation-test-between-two-variables-in-r> and you can specify the type in your code `cor(x, y, method = c(\"pearson\", \"kendall\", \"spearman\"))`\n\n\n::: {.cell}\n\n:::\n\n\nNow that you know what to expect, lets proceed with the correlation matrices (same thing as above, but all in a go!):\n\n### -----corrplot Correlation Matrix -----\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor_matrix <- cor(data)\ncorrplot(cor_matrix, method = \"circle\", type = \"upper\", \n         title = \"Correlation Matrix\", addCoef.col = \"black\")\n```\n\n::: {.cell-output-display}\n![](Correlation_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n### -----corrplot Correlation Matrix -----\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggcorrplot(cor_matrix, \n           method = \"square\", \n           type = \"lower\", \n           lab = TRUE, \n           title = \"mtcars\", \n           lab_size = 3) +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: `aes_string()` was deprecated in ggplot2 3.0.0.\nℹ Please use tidy evaluation idioms with `aes()`.\nℹ See also `vignette(\"ggplot2-in-packages\")` for more information.\nℹ The deprecated feature was likely used in the ggcorrplot package.\n  Please report the issue at <https://github.com/kassambara/ggcorrplot/issues>.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Correlation_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n### -----PerformanceAnalytics Pairwise Correlation Plot -----\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchart.Correlation(data, histogram = TRUE, pch = 19)\n```\n\n::: {.cell-output-display}\n![](Correlation_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n###-----GGally Pairwise Correlation Plot -----\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggpairs(data, \n        title = \"Pairwise Correlation Plot with GGally\",\n        lower = list(continuous = wrap(\"smooth\", method = \"lm\")),\n        upper = list(continuous = wrap(\"cor\", size = 3)))\n```\n\n::: {.cell-output-display}\n![](Correlation_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n###----- psych Enhanced Pairwise Correlation Plot -----\n\n\n::: {.cell}\n\n```{.r .cell-code}\npairs.panels(data, \n             method = \"pearson\", \n             hist.col = \"lightblue\", \n             density = TRUE, \n             ellipses = TRUE)\n```\n\n::: {.cell-output-display}\n![](Correlation_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n###----- Base R Heatmap -----\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ----- 8. Base R Heatmap -----\nheatmap(cor_matrix, symm = TRUE, \n        main = \"Correlation Heatmap\", \n        col = colorRampPalette(c(\"red\", \"white\", \"blue\"))(20))\n```\n\n::: {.cell-output-display}\n![](Correlation_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ----- 10. corrr Tidy Correlation -----\ncor_matrix_tidy <- correlate(data)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nCorrelation computed with\n• Method: 'pearson'\n• Missing treated using: 'pairwise.complete.obs'\n```\n\n\n:::\n\n```{.r .cell-code}\ncor_matrix_tidy %>% \n  fashion() %>% \n  print()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  term  mpg disp   hp   wt\n1  mpg      -.85 -.78 -.87\n2 disp -.85       .79  .89\n3   hp -.78  .79       .66\n4   wt -.87  .89  .66     \n```\n\n\n:::\n\n```{.r .cell-code}\n# Network-style correlation plot\ncor_matrix_tidy %>% \n  network_plot(min_cor = 0.3)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\nℹ The deprecated feature was likely used in the corrr package.\n  Please report the issue at <https://github.com/tidymodels/corrr/issues>.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Correlation_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nWhat are your insights? Do they make sense? Remember:\n\n-   mpg (Miles per Gallon): Represents the fuel efficiency of the car. Higher values, better efficiency.\n\n-   disp (Displacement): Represents the engine displacement, which is the total volume of all the cylinders in the engine.\n\n-   hp (Horsepower): Represents the power output of the car's engine.\n\n-   wt (Weight): Represents the weight of the car.\n",
    "supporting": [
      "Correlation_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}